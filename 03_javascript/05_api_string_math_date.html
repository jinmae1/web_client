<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>api</title>
    </head>
    <body>
        <h1>string</h1>
        <button onclick="test1();">실행</button>
        <button onclick="test2();">실습문제</button>
        <script>
            /**
             * string내장객체
             */
            function test1() {
                const str = "apple Samsung Pineapple";
                console.log(str.length); // 23
                console.log(str.charAt(1));
                console.log(str[1]);
                console.log(str.indexOf("app"));
                console.log(str.indexOf("bpp")); // -1

                // 잘라내기
                // str.substring(startIndex[, endIndex]): start부터 end전까지 문자열 반환
                console.log(str.substring(6, 9));
                // str.substr(stratIndex[, length]): start부터 length만큼 문자열 반환
                console.log(str.substr(6, 3));

                // 토근처리
                const arr = str.split(" ");
                console.log(arr, typeof arr);
            }
        </script>

        <script>
            /**
             * @실습문제: 사용자로부터 영화제목을 입력받고, 알파벳의 개수를 출력하세요.
             *
             */
            function test2() {
                let count = 0;
                const movie = prompt("영화 제목");
                if (movie)
                    for (const letter of movie)
                        if (isAlphabetic(letter)) count++;
                alert(count);

                let isLowerCase = (letter) => "a" <= letter && letter <= "z";
                let isUpperCase = (letter) => "A" <= letter && letter <= "Z";
                let isAlphabetic = (letter) =>
                    isLowerCase(letter) || isUpperCase(letter);
            }
        </script>

        <h1>math</h1>
        <button onclick="test3();">실행</button>
        <button onclick="test4();">test4 실행</button>
        <ul id="nums">
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
        <script>
            /**
             * 반올림/올림/버림 처리
             *
             * 난수생성
             */
            function test3() {
                const n = 123.456;
                console.log(Math.round(100 * n) / 100);

                console.log(Math.ceil(n));
                console.log(Math.floor(n));

                // 0.0이상 1.0미만 실수 리턴
                console.log(Math.random());

                // 1 ~ 10사이의 난수(정수) 생성
                console.log(Math.ceil(Math.random() * 10));
            }

            /**
             * #num하위의 li태그에 1 ~ 1000사이의 임의의 수를 대입하고,
             * 짝수인 경우에는 원하는 컬러로 지정한다.
             */

            function test4() {
                for (const li of nums.children) {
                    const rand = Math.floor(Math.random() * 1000 + 1);
                    li.innerHTML = rand;
                    li.style.color = rand % 2 ? "" : "red";
                }
            }
        </script>

        <h1>date</h1>
        <button onclick="test5();">실행</button>
        <script>
            /**
             * Date 날짜/시각정보를 관리하는 객체
             * 기본생성자를 사용하면 현재 시각 정보를 가지고 있다.
             */
            function test5() {
                const today = new Date();
                console.log(today);

                const dday = new Date(2021, 12 - 1, 25, 0, 30, 20); // 21.12.25
                console.log(dday);

                const holiday = new Date("2021-10-29");
                console.log(holiday);

                // unix time(epoch time) - 1970년 1월 1일 자정 기준 누적 millis
                console.log(new Date().getTime());
                console.log(Date.now());
            }
        </script>

        <h1 style="color: tomato; text-align: center" id="clock"></h1>
        <script>
            function displayClock() {
                const f = (n) => (n < 10 ? "0" + n : n);
                const now = new Date();
                const year = now.getFullYear();
                const month = f(now.getMonth() + 1);
                const date = f(now.getDate());
                const day = f(now.getDay());
                const hour = f(now.getHours());
                const minute = f(now.getMinutes());
                const second = f(now.getSeconds());
                return `${year}-${month}-${date} ${hour}:${minute}:${second}`;
                // return  "2021-10-05 16:55:30";
            }

            //  다만 최초 시작 시각 때문에 약간의 오차가 있다.
            const repeatClock = () => {
                clock.innerHTML = displayClock();
                setTimeout(repeatClock, 1000);
            };
            // repeatClock();

            /**
             * 즉시 실행함수: Immediately Invoked Function Expression(IIFE 이피)
             */
            (repeatClock2 = () => {
                clock.innerHTML = displayClock();
                setTimeout(repeatClock2, 1000);
            })();
        </script>
    </body>
</html>
